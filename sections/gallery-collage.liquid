{% schema %}
{
  "name": "Collage Gallery",
  "settings": [],
  "blocks": [
    {
      "type": "image",
      "name": "Image",
      "settings": [
        { "type": "image_picker", "id": "gallery_image", "label": "Image" }
      ]
    }
  ],
  "presets": [
    { "name": "Collage Gallery" }
  ]
}
{% endschema %}

<div class="page-width">
<div class="collage-gallery">
  {% assign blocks = section.blocks %}

  {% if blocks.size > 0 %}
    <!-- 1st full -->
    <div class="collage-item full">
      <img src="{{ blocks[0].settings.gallery_image | img_url: '800x' }}" alt="Gallery image">
    </div>
  {% endif %}

  {% if blocks.size > 2 %}
    <!-- 2nd + 3rd stacked (30/70) -->
    <div class="collage-stack stack-30-70">
      <div class="collage-item stack-top">
        <img src="{{ blocks[1].settings.gallery_image | img_url: '800x' }}" alt="Gallery image">
      </div>
      <div class="collage-item stack-bottom">
        <img src="{{ blocks[2].settings.gallery_image | img_url: '800x' }}" alt="Gallery image">
      </div>
    </div>
  {% endif %}

  {% if blocks.size > 4 %}
    <!-- 4th + 5th stacked (70/30) -->
    <div class="collage-stack stack-70-30">
      <div class="collage-item stack-top">
        <img src="{{ blocks[3].settings.gallery_image | img_url: '800x' }}" alt="Gallery image">
      </div>
      <div class="collage-item stack-bottom">
        <img src="{{ blocks[4].settings.gallery_image | img_url: '800x' }}" alt="Gallery image">
      </div>
    </div>
  {% endif %}

  {% if blocks.size > 5 %}
    <!-- 6th full -->
    <div class="collage-item full">
      <img src="{{ blocks[5].settings.gallery_image | img_url: '800x' }}" alt="Gallery image">
    </div>
  {% endif %}
</div>
</div>

<style>
.collage-gallery {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 20px;
  align-items: stretch;
}

.collage-item,
.collage-stack {
  overflow: hidden;
  position: relative;
}

/* Full height columns */
.collage-item.full {
}

/* Stacked column base */
.collage-stack {
  display: grid;
  gap: 20px;
}

/* 2nd + 3rd (30/70) */
.stack-30-70 {
  grid-template-rows: 30% 70%;
}

/* 4th + 5th (70/30) */
.stack-70-30 {
  grid-template-rows: 70% 30%;
}

.collage-item img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform .3s ease;
  display: block;
}

.collage-item:hover img {
  transform: scale(1.05);
}
</style>
