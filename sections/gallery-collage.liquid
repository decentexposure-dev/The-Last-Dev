{% schema %}
{
  "name": "Collage Gallery",
  "settings": [],
  "blocks": [
    {
      "type": "image",
      "name": "Image",
      "settings": [
        { "type": "image_picker", "id": "gallery_image", "label": "Image" }
      ]
    }
  ],
  "presets": [
    { "name": "Collage Gallery" }
  ]
}
{% endschema %}

<div class="collage-gallery">
  {% assign blocks = section.blocks %}

  {% if blocks.size > 0 %}
    <!-- 1st full -->
    <div class="collage-item full">
      <img src="{{ blocks[0].settings.gallery_image | img_url: '800x' }}" alt="Gallery image">
    </div>
  {% endif %}

  {% if blocks.size > 2 %}
    <!-- 2nd + 3rd stacked -->
    <div class="collage-stack">
      <div class="collage-item stack-60">
        <img src="{{ blocks[1].settings.gallery_image | img_url: '800x' }}" alt="Gallery image">
      </div>
      <div class="collage-item stack-40">
        <img src="{{ blocks[2].settings.gallery_image | img_url: '800x' }}" alt="Gallery image">
      </div>
    </div>
  {% endif %}

  {% if blocks.size > 4 %}
    <!-- 4th + 5th stacked -->
    <div class="collage-stack">
      <div class="collage-item stack-60">
        <img src="{{ blocks[3].settings.gallery_image | img_url: '800x' }}" alt="Gallery image">
      </div>
      <div class="collage-item stack-40">
        <img src="{{ blocks[4].settings.gallery_image | img_url: '800x' }}" alt="Gallery image">
      </div>
    </div>
  {% endif %}

  {% if blocks.size > 5 %}
    <!-- Last full -->
    <div class="collage-item full">
      <img src="{{ blocks[5].settings.gallery_image | img_url: '800x' }}" alt="Gallery image">
    </div>
  {% endif %}
</div>

<style>
.collage-gallery {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 12px;
  align-items: stretch;
}

.collage-item,
.collage-stack {
  border-radius: 12px;
  overflow: hidden;
  position: relative;
}

/* Full height columns */
.collage-item.full {
  height: 500px;
}

/* Stacked columns */
.collage-stack {
  display: grid;
  grid-template-rows: 60% 40%;
  height: 500px;
  gap: 12px;
}

.collage-item img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform .3s ease;
  display: block;
}

.collage-item:hover img {
  transform: scale(1.05);
}
</style>
